{"version":3,"sources":["img/frodo.png","img/gandalf.png","contexts/auth0-context.js","components/SiteHeader.js","pages/Dashboard.js","pages/Home.js","components/PrivatRoute.js","App.js","index.js"],"names":["module","exports","Auth0Context","createContext","Auth0Provider","children","useState","isAuthenticated","setIsAuthenticated","user","setUser","auth0Client","setAuth0Client","isLoading","setIsLoading","useEffect","a","createAuth0Client","domain","client_id","redirect_uri","window","location","href","auth0","search","includes","handleRedirectCallback","alert","replace","pathname","getUser","initAuth0","Provider","value","login","loginWithRedirect","logout","getToken","getTokenSilently","SiteHeader","useContext","className","to","onClick","name","console","log","Dashboard","src","Frodo","alt","Home","Gandalf","PrivateRoute","rest","App","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wFAAAA,EAAOC,QAAU,IAA0B,mC,mBCA3CD,EAAOC,QAAU,IAA0B,qC,0LCI9BC,EAAeC,0BAGrB,SAASC,EAAT,GAAoC,IAAZC,EAAW,EAAXA,SAAW,EACOC,oBAAS,GADhB,mBACjCC,EADiC,KAChBC,EADgB,OAEfF,mBAAS,MAFM,mBAEjCG,EAFiC,KAE3BC,EAF2B,OAGDJ,mBAAS,MAHR,mBAGjCK,EAHiC,KAGpBC,EAHoB,OAINN,oBAAS,GAJH,mBAIjCO,EAJiC,KAItBC,EAJsB,KA6CxC,OAvCAC,qBAAU,WAAM,4CAGd,gCAAAC,EAAA,sEACsBC,YAAkB,CACpCC,OAAQ,4BACRC,UAAW,mCAEXC,aAAcC,OAAOC,SAASC,OALlC,UACQC,EADR,OASEZ,EAAeY,IAGZH,OAAOC,SAASG,OAAOC,SAAS,WAAYL,OAAOC,SAASG,OAAOC,SAAS,UAZjF,0CAcYF,EAAMG,yBAdlB,yDAgBMC,MAAM,EAAD,IAhBX,QAmBIP,OAAOC,SAASO,QAAQR,OAAOC,SAASQ,UAnB5C,yBAuBgCN,EAAMjB,kBAvBtC,QAuBQA,EAvBR,OAwBEC,EAAmBD,GAGhBA,IACKE,EAAOe,EAAMO,UACnBrB,EAAQD,IAGVK,GAAa,GAhCf,2DAHc,0DACdkB,KAoCC,IAEAnB,EAAkB,4CAGnB,kBAACX,EAAa+B,SAAd,CACEC,MAAO,CACL3B,kBACAE,OACAI,YACAsB,MAAO,kBAAexB,EAAYyB,kBAAZ,MAAAzB,EAAW,YACjC0B,OAAQ,kBAAe1B,EAAY0B,OAAZ,MAAA1B,EAAW,YAClC2B,SAAU,kBAAe3B,EAAY4B,iBAAZ,MAAA5B,EAAW,cAGrCN,GC7DQ,SAASmC,IAAc,IAAD,EACcC,qBAAWvC,GAApDK,EAD2B,EAC3BA,gBAAiB4B,EADU,EACVA,MAAOE,EADG,EACHA,OAAQ5B,EADL,EACKA,KACxC,OACE,yBAAKiC,UAAU,eAEb,6BACE,kBAAC,IAAD,CAAMC,GAAG,KAAT,QACA,kBAAC,IAAD,CAAMA,GAAG,cAAT,cAIF,8BACEpC,GAAmB,4BAAQqC,QAAST,GAAjB,SACpB5B,GAAmBE,GAClB,oCACE,gCAASA,EAAKoC,MACd,4BAAQD,QAASP,GAAjB,aDdVS,QAAQC,IAAI1B,OAAOC,U,qBEHJ,SAAS0B,IACtB,OACE,yBAAKN,UAAU,kBACb,6BACE,yBAAKO,IAAKC,IAAOC,IAAI,UACrB,gD,qBCLO,SAASC,IACtB,OACE,yBAAKV,UAAU,aACb,6BACE,yBAAKO,IAAKI,IAASF,IAAI,YACvB,uD,kBCJO,SAASG,EAAT,GAA4C,IAArBjD,EAAoB,EAApBA,SAAakD,EAAO,8BJC5Bd,qBAAWvC,GIA/BK,EADgD,EAChDA,gBAAiBE,EAD+B,EAC/BA,KAAM0B,EADyB,EACzBA,MAE/B,OAAI5B,GAAoBE,EAIjB,kBAAC,IAAU8C,EAAOlD,GAHhB8B,ICCI,SAASqB,IAiBtB,OACE,kBAAC,IAAD,KACE,yBAAKd,UAAU,OAEb,kBAACF,EAAD,MAGA,kBAAC,IAAD,KACE,kBAACc,EAAD,CAAcG,KAAK,cACjB,kBAACT,EAAD,OAEF,kBAAC,IAAD,CAAOS,KAAK,IAAIC,OAAO,GACrB,kBAACN,EAAD,UCjCZO,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAACzD,EAAD,KAEE,kBAAC,EAAD,QAGJ0D,SAASC,eAAe,W","file":"static/js/main.0c6718dc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/frodo.1d39767b.png\";","module.exports = __webpack_public_path__ + \"static/media/gandalf.873079cc.png\";","import createAuth0Client from \"@auth0/auth0-spa-js\";\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\n\r\nexport const Auth0Context = createContext();\r\nexport const useAuth0 = () => useContext(Auth0Context);\r\nconsole.log(window.location)\r\nexport function Auth0Provider({children}) {\r\n  const [isAuthenticated, setIsAuthenticated] =  useState(false);\r\n  const [user, setUser] =  useState(null);\r\n  const [auth0Client, setAuth0Client] =  useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    initAuth0();\r\n\r\n    async function initAuth0(){\r\n      const auth0 = await createAuth0Client({\r\n        domain: 'dev-voe9-vjq.us.auth0.com',\r\n        client_id: '54UWuQk8ZVoLSLZHw1b13X9DfJhup3RE',\r\n        // redirect_uri: window.location.origin,\r\n        redirect_uri: window.location.href,\r\n\r\n        // pathname / href пофіксити\r\n      });\r\n      setAuth0Client(auth0);\r\n\r\n      // handle redirect when user comes back\r\n      if(window.location.search.includes('code=') && window.location.search.includes('state=')){\r\n        try {\r\n          await auth0.handleRedirectCallback();\r\n        } catch(err) {\r\n          alert(err);\r\n        }\r\n\r\n        window.location.replace(window.location.pathname);\r\n      }\r\n\r\n      //is user authenticated\r\n      const isAuthenticated = await auth0.isAuthenticated();\r\n      setIsAuthenticated(isAuthenticated);\r\n\r\n      // getting user\r\n      if(isAuthenticated) {\r\n        const user = auth0.getUser();\r\n        setUser(user);\r\n      }\r\n\r\n      setIsLoading(false)\r\n    }\r\n  }, []);\r\n\r\n  if(isLoading) return <div>Loading....</div>;\r\n\r\n  return (\r\n    <Auth0Context.Provider\r\n      value={{\r\n        isAuthenticated,\r\n        user,\r\n        isLoading,\r\n        login: (...params) => auth0Client.loginWithRedirect(...params),\r\n        logout: (...params) => auth0Client.logout(...params),\r\n        getToken: (...params) => auth0Client.getTokenSilently(...params),\r\n      }}\r\n    >\r\n      {children}\r\n    </Auth0Context.Provider>\r\n  )\r\n}","import React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Auth0Context } from '../contexts/auth0-context';\n\nexport default function SiteHeader() {\n  const { isAuthenticated, login, logout, user } = useContext(Auth0Context)\n  return (\n    <div className=\"site-header\">\n      {/* stuff on the left */}\n      <div>\n        <Link to=\"/\">Home</Link>\n        <Link to=\"/dashboard\">Dashboard</Link>\n      </div>\n\n      {/* stuff on the right */}\n      <div>\n      {!isAuthenticated && <button onClick={login}>Login</button>}\n      {isAuthenticated && user && (\n        <>\n          <button>{user.name}</button>\n          <button onClick={logout}>Logout</button>\n        </>\n      )}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport Frodo from '../img/frodo.png';\n\nexport default function Dashboard() {\n  return (\n    <div className=\"page dashboard\">\n      <div>\n        <img src={Frodo} alt=\"Frodo\" />\n        <h2>Welcome Persom</h2>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport Gandalf from '../img/gandalf.png';\n\nexport default function Home() {\n  return (\n    <div className=\"page home\">\n      <div>\n        <img src={Gandalf} alt=\"Gandalf\" />\n        <h2>You Shall Not Pass!!!</h2>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { useAuth0 } from \"../contexts/auth0-context\";\r\n\r\nexport default function PrivateRoute({children, ...rest}) {\r\n  const { isAuthenticated, user, login } = useAuth0();\r\n\r\n  if(!isAuthenticated && !user) {\r\n    return login();\r\n  }\r\n\r\n  return <Route {...rest}>{children}</Route>\r\n}","import React from 'react';\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport SiteHeader from './components/SiteHeader';\nimport Dashboard from './pages/Dashboard';\nimport Home from './pages/Home';\nimport './App.css';\n// import { useAuth0 } from './contexts/auth0-context';\nimport PrivateRoute from './components/PrivatRoute';\n\nexport default function App() {\n  // const { getToken } = useAuth0();\n\n  // useEffect(() => {\n  //   getUserData();\n  // }, []);\n\n  // async function getUserData(){\n  //   const token = await getToken();\n\n  //   const response = await fetch('http://example.com/api', {\n  //     headers: { Authorization: `Bearer ${token}`}\n  //   });\n\n  //   const data = await response.json();\n  // }\n\n  return (\n    <Router>\n      <div className=\"app\">\n        {/* site header */}\n        <SiteHeader />\n\n        {/* routes */}\n        <Switch>\n          <PrivateRoute path=\"/dashboard\">\n            <Dashboard />\n          </PrivateRoute>\n          <Route path=\"/\" exact={true}>\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { Auth0Provider } from './contexts/auth0-context';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Auth0Provider>\n\n      <App />\n    </Auth0Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}